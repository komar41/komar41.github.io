<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Big Yellow taxi | Kazi Shahrukh Omar</title> <meta name="author" content="Kazi Shahrukh Omar"> <meta name="description" content="Taxi ridership data and interesting trends visualization for Chicago in 2019"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8E%93&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://komar41.github.io/projects/big_yellow_taxi/"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Kazi ShahrukhÂ </span>Omar</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> </header> <article><h5><u>Access this project</u></h5> <p><b>Demo URL:</b> <a href="http://shiny.evl.uic.edu:3838/g5/CS-424-Project-3-kzo/" rel="external nofollow noopener" target="_blank">http://shiny.evl.uic.edu:3838/g5/CS-424-Project-3-kzo/</a> <br> <b>Introduction video:</b> <a href="https://www.youtube.com/watch?v=hREgA79KWEo" rel="external nofollow noopener" target="_blank">https://www.youtube.com/watch?v=hREgA79KWEo</a> <br> <b>GitHub repo:</b> <a href="https://github.com/komar41/Big-Yellow-Taxi" rel="external nofollow noopener" target="_blank">https://github.com/komar41/Big-Yellow-Taxi</a> <br> <b>Tools used:</b> Python, Pandas, Numpy, R, and Shiny.</p> <p>The visulization was created for a screen with resolution of 5760x1620 (Sage screen of EVL UIC Lab). [For reference see picture below]</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/sage.jpeg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="overview" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> User interface displayed in SAGE screen of EVL lab, UIC. </div> <p align="justify"> This project is intended for visualizing the trends and interesting patterns in Taxi ridership data (2019) in Chicago. We are choosing to look at data from 2019 data is because it is pre-COVID data and more representative of a 'typical' year. </p> <h5><u>User Interface</u></h5> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%201.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="overview" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> UI of <b>Big Yellow Taxi</b> application. </div> <div class="row"> <div class="col-sm-3 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%202.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="overview" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-9 mt-9 mt-md-0"> <p align="justify"> Let us focus our attention on the control panel. The visualization starts with Chicago as a chosen community area, which means data from every community in Chicago is aggregated. Furthermore, the user can select the Outside Chicago Area checkbox to also include the data for when the taxi ride started or ended in Chicago. Next, the user can go ahead by selecting West Lawn as the community area, after which From and To radio buttons come to life as they are enabled. Here we can specify and aggregate data for only when the trip started from West Lawn and ended somewhere in Chicago, or when the trip started somewhere in Chicago and ended in West Lawn. This is assuming the fact that the Outside Chicago Area is deselected. If the Outside Chicago Area is selected when West Lawn is chosen as the community area then the following is how the data would be aggregated: Trip started from or ended in West Lawn regardless of destination or starting point, respectively. Next, the user can select between the time formats: 12-hour or 24-hour. These changes are reflected in the bar graph and the table where time is displayed. Next, the user can select a distance unit between either Miles or Kilometers. These changes are reflected in the bar graph and the table where time is displayed. Next, the user can select whether they want to look at data from a specific taxi company or display data from all the companies. This helps the user investigate specific statistics about an individual taxi company. </p> </div> </div> <p align="justify"> On the "About" page, some details are listed such as creators of the application, date published, data sources, data owner, etc. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%203.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="comparison" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> About page </div> <p align="justify"> Next, we will look at <b>graphs and tables</b> associated with the graphs. Then at the end, we will look at a <b>map</b> that displays ridership data per community. The data displayed in the graph adapts based on the controls we explored above. </p> <p align="justify"> On the left-hand side, the graph displays one bar for each day of 2019 and each bar represents rides for that day. On the right-hand side, the same data can be explored in a tabular format, where users can look at individual data points. The table can be sorted in an ascending or descending order for each column. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%204.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="findings" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Taxi rides by date </div> <p align="justify"> On the left-hand side, the graph displays one bar for each month of 2019 and each bar represents rides for that month. On the right-hand side, the same data can be explored in a tabular format, where users can look at data aggregated for each month. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%205.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="findings" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Taxi rides by month </div> <p align="justify"> Here, the graph displays aggregated data for each day of the week in 2019 starting from Monday to Sunday. Next to the graph, we can see the data shown in a table, where each column can be sorted in ascending or descending order by clicking on the column names. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%206.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="findings" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Taxi rides by day of week </div> <p align="justify"> Next, we have taxi rides by the hour of the day. Here, the graph shows aggregated data about each day in 2019. The x-axis adapts to a 12-hour or 24-hour format based on the controls that we explored in the earlier section. Next to the graph, we can see the data from the graph shown in a table, where the data can be sorted in ascending or descending order by clicking on the column names in the table. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%207.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="findings" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Taxi rides by hour of day </div> <p align="justify"> Here we have a graph that shows data based on trip range. The trip distance can be adapted to two distance formats based on the controls on the left side: Miles and Kilometers. When Kilometers is selected, ranges are broken down based on the following bins: 0.8 - 2, 2 - 5, 5 - 10, 10 - 15, 15 - 25, 25 - 35, 35 - 160. When Miles is selected, ranges are broken down based on the following bins: 0.5 - 1, 1 - 3, 3 - 5, 5 - 10, 10 - 15, 15 - 20, 20 - 100. Next to the graph, we can see the data from the graph shown in a table, where the data can be sorted by trip range or rides count for each bin in ascending or descending order by clicking on the column names in the table. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%208.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="findings" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Taxi rides by trip distance </div> <p align="justify"> Here we have a graph that shows data based on trip duration. The time duration is broken down into 7 subset: 1 - 5 min, 5 - 10 min, 10 - 15 min, 15 - 20 min, 15 - 20, 20 - 30 min, 1/2 hr - 1 hr, &gt; 1 hr. Each bar in the graph and each table entry in the table represents each one of those bins. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%209.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="findings" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Taxi rides by trip duration </div> <p align="justify"> Here, the x-axis represents either the destination or the starting point based on whether the user clicks the radio button To or From. The y-axis represents the percentage of riders traveling from one point to another. It makes more sense when we look at the title. Let us select West Lawn as the community area and click on the To radio button. The graph shows the percentage of riders traveling from the community area on the graph to West Lawn. On the right-hand side, we have a table that displays the same data but in a tabular format. The percentage can be sorted from low to high or vice-versa. The name can also be sorted by the pick-up area or drop-off area depending on where you chose To or From on the radio button, respectively. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%2010.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="findings" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Percentage of taxi rides from one neighborhood to all other </div> <p align="justify"> Furthermore, the data we looked at in the graph is also represented on the map with a heat map. On the upper right of the map, we have legends that go from Red color to Blue color hue representing low to high percentages of riders. Additionally, the community area can be selected by clicking on the community area on the map. When you hover over the community area on the map, you can also see the name and percentage of riders traveling from or to that community area. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/overview/Overview%2011.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="findings" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Percentage of taxi rides from one neighborhood to all other </div> <h5><u>About the Data</u></h5> <p>Data source: Two datasets were used to build the application. Both datasets were collected from Chicago Data Portal.</p> <ol> <li> <p>The dataset that contains information about Taxi rides in Chicago for 2019 can be found <a href="https://data.cityofchicago.org/Transportation/Taxi-Trips-2019/h4cq-z3dy" rel="external nofollow noopener" target="_blank">here</a>. The file size is 7GB.</p> </li> <li> <p>The dataset that contains information regarding boundaries for each community area in Chicago can be found <a href="https://data.cityofchicago.org/Facilities-Geographic-Boundaries/Boundaries-Community-Areas-current-/cauq-8yn6" rel="external nofollow noopener" target="_blank">here</a>. The file size is 2MB.</p> </li> </ol> <p align="justify"> Data usage: The taxi trips from the 2019 dataset contain 23 columns of which we are only concerned with looking at 6 of them for this visualization. Trip Start Timestamp is a string that describes when the trip started, rounded to the nearest 15 minutes. Trip Seconds is an integer that describes the time of the trip in seconds. Trip Miles is a float that describes the distance of the trip in miles. Pickup Community Area is an integer that describes the Community Area where the trip began and this column would be blank for locations outside Chicago. Dropoff Community Area is an integer that describes the Community Area where the trip ended and this column would be blank for locations outside Chicago. Company is a string that describes the taxi company that ran that specific taxi service for the trip. <br> The Boundaries - Community Areas dataset contains information about the boundaries of each community area in Chicago. This data is downloadable in GEOJSON format, which can be further used to describe each community with a color on a map in RStudio. <br><br> The EVL shiny-server at UIC was used to publish this project. To make the project responsive and create the start-up time as quickly as possible, we split up the data into various subfolders with their CSV files. Two datasets need to be downloaded, both of which are provided at the bottom of the page. Python script used for splitting the ridership data is provided below: </p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">csv</span>
<span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="n">warnings</span>
<span class="n">warnings</span><span class="p">.</span><span class="nf">filterwarnings</span><span class="p">(</span><span class="sh">"</span><span class="s">ignore</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">exists</span><span class="p">(</span><span class="nb">dir</span><span class="p">):</span>
        <span class="n">os</span><span class="p">.</span><span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">preprocess</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">dictCompany</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="sh">'</span><span class="s">Trip Seconds</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Trip Miles</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Pickup Community Area</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Dropoff Community Area</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Company</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Trip Start Timestamp</span><span class="sh">'</span><span class="p">]]</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Miles</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;=</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Miles</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">100</span><span class="p">)]</span>
    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">tripKM</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Miles</span><span class="sh">'</span><span class="p">].</span><span class="nf">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nf">round</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="mf">1.609</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Seconds</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">60</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Seconds</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">18000</span><span class="p">)]</span>
    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Pickup Community Area</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Pickup Community Area</span><span class="sh">'</span><span class="p">].</span><span class="nf">mask</span><span class="p">(</span> <span class="o">~</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Pickup Community Area</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Pickup Community Area</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">77</span><span class="p">)),</span> <span class="mi">78</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Dropoff Community Area</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Dropoff Community Area</span><span class="sh">'</span><span class="p">].</span><span class="nf">mask</span><span class="p">(</span> <span class="o">~</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Dropoff Community Area</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Dropoff Community Area</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">77</span><span class="p">)),</span> <span class="mi">78</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Pickup Community Area</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">78</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Dropoff Community Area</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">78</span><span class="p">))]</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">replace</span><span class="p">({</span><span class="sh">"</span><span class="s">Company</span><span class="sh">"</span><span class="p">:</span> <span class="n">dictCompany</span><span class="p">})</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">dropna</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Start Timestamp</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Start Timestamp</span><span class="sh">'</span><span class="p">])</span>
    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Start Timestamp</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Start Timestamp</span><span class="sh">'</span><span class="p">].</span><span class="nf">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="p">.</span><span class="nf">datetime</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">year</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">month</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">day</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">hour</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Pickup Community Area</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Pickup Community Area</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Dropoff Community Area</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Dropoff Community Area</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Seconds</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Trip Seconds</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">Trip Seconds</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">tripSeconds</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Trip Miles</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">tripMiles</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Pickup Community Area</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">pickupArea</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Dropoff Community Area</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">dropArea</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Company</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">company</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Trip Start Timestamp</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">tripStartTime</span><span class="sh">'</span><span class="p">})</span>

    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">preCalc</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pick</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">outChicago</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">df_date</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">tripStartTime</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">date</span><span class="p">]).</span><span class="nf">size</span><span class="p">().</span><span class="nf">to_frame</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">().</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">tripStartTime</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Date</span><span class="sh">'</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span> <span class="sh">'</span><span class="s">Count</span><span class="sh">'</span><span class="p">})</span>
    <span class="n">df_hour</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">tripStartTime</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">hour</span><span class="p">]).</span><span class="nf">size</span><span class="p">().</span><span class="nf">to_frame</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">().</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">tripStartTime</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Hour</span><span class="sh">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="sh">'</span><span class="s">Count</span><span class="sh">'</span><span class="p">})</span>
    <span class="n">df_day</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">tripStartTime</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">dayofweek</span><span class="p">]).</span><span class="nf">size</span><span class="p">().</span><span class="nf">to_frame</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">().</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">tripStartTime</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Day</span><span class="sh">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="sh">'</span><span class="s">Count</span><span class="sh">'</span><span class="p">})</span>

     <span class="c1"># Values: 0 to 6. (0: Monday, 6: Sunday)
</span>    <span class="n">df_month</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">tripStartTime</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">month</span><span class="p">]).</span><span class="nf">size</span><span class="p">().</span><span class="nf">to_frame</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">().</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">tripStartTime</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Month</span><span class="sh">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="sh">'</span><span class="s">Count</span><span class="sh">'</span><span class="p">})</span>

    <span class="n">df_mileage_miles</span> <span class="o">=</span> <span class="n">df</span>

    <span class="n">ranges_miles</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.49</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>

    <span class="n">df_mileage_miles</span><span class="p">[</span><span class="sh">'</span><span class="s">mileage_bin_miles</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">cut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">tripMiles</span><span class="sh">'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">ranges_miles</span><span class="p">)</span>
    <span class="n">df_mileage_miles</span> <span class="o">=</span> <span class="n">df_mileage_miles</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="n">df_mileage_miles</span><span class="p">[</span><span class="sh">'</span><span class="s">mileage_bin_miles</span><span class="sh">'</span><span class="p">]]).</span><span class="nf">size</span><span class="p">().</span><span class="nf">to_frame</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">().</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">mileage_bin_miles</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Mileage_miles</span><span class="sh">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="sh">'</span><span class="s">Count</span><span class="sh">'</span><span class="p">})</span>
    <span class="n">df_mileage_miles</span><span class="p">.</span><span class="nf">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="sh">'</span><span class="s">Mileage_miles</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">0.5 - 1</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">1 - 3</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">3 - 5</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">5 - 10</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">10 - 15</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">15 - 20</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">20 - 100</span><span class="sh">'</span><span class="p">]</span>
    <span class="n">df_mileage_miles</span><span class="p">[</span><span class="sh">'</span><span class="s">Mileage_miles</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_mileage_miles</span><span class="p">[</span><span class="sh">'</span><span class="s">Mileage_miles</span><span class="sh">'</span><span class="p">].</span><span class="n">cat</span><span class="p">.</span><span class="nf">rename_categories</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

    <span class="n">df_mileage_km</span> <span class="o">=</span> <span class="n">df</span>
    <span class="n">ranges_km</span>  <span class="o">=</span> <span class="p">[</span><span class="mf">0.79</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mf">160.0</span><span class="p">]</span>
    <span class="n">df_mileage_km</span><span class="p">[</span><span class="sh">'</span><span class="s">mileage_bin_km</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">cut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">tripKM</span><span class="sh">'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">ranges_km</span><span class="p">)</span>
    <span class="n">df_mileage_km</span> <span class="o">=</span> <span class="n">df_mileage_km</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="n">df_mileage_km</span><span class="p">[</span><span class="sh">'</span><span class="s">mileage_bin_km</span><span class="sh">'</span><span class="p">]]).</span><span class="nf">size</span><span class="p">().</span><span class="nf">to_frame</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">().</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">mileage_bin_km</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Mileage_km</span><span class="sh">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="sh">'</span><span class="s">Count</span><span class="sh">'</span><span class="p">})</span>
    <span class="n">df_mileage_km</span><span class="p">.</span><span class="nf">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="sh">'</span><span class="s">Mileage_km</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">0.8 - 2</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">2 - 5</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">5 - 10</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">10 - 15</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">15 - 25</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">25 - 35</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">35 - 160</span><span class="sh">'</span><span class="p">]</span>
    <span class="n">df_mileage_km</span><span class="p">[</span><span class="sh">'</span><span class="s">Mileage_km</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_mileage_km</span><span class="p">[</span><span class="sh">'</span><span class="s">Mileage_km</span><span class="sh">'</span><span class="p">].</span><span class="n">cat</span><span class="p">.</span><span class="nf">rename_categories</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

    <span class="n">df_time</span> <span class="o">=</span> <span class="n">df</span>
    <span class="n">ranges</span> <span class="o">=</span> <span class="p">[</span><span class="mf">59.99</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">900</span><span class="p">,</span> <span class="mi">1200</span><span class="p">,</span> <span class="mi">1800</span><span class="p">,</span> <span class="mi">3600</span><span class="p">,</span> <span class="n">np</span><span class="p">.</span><span class="n">inf</span><span class="p">]</span>
    <span class="n">df_time</span><span class="p">[</span><span class="sh">'</span><span class="s">time_bin</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">cut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">tripSeconds</span><span class="sh">'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">ranges</span><span class="p">)</span>
    <span class="n">df_time</span> <span class="o">=</span> <span class="n">df_time</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="n">df_time</span><span class="p">[</span><span class="sh">'</span><span class="s">time_bin</span><span class="sh">'</span><span class="p">]]).</span><span class="nf">size</span><span class="p">().</span><span class="nf">to_frame</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">().</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">time_bin</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">timeTaken</span><span class="sh">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="sh">'</span><span class="s">Count</span><span class="sh">'</span><span class="p">})</span>
    <span class="n">df_time</span><span class="p">.</span><span class="nf">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="sh">'</span><span class="s">timeTaken</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">1 - 5 min</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">5 - 10 min</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">10 - 15 min</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">15 - 20 min</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">20 - 30 min</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">1/2 hr - 1 hr</span><span class="sh">'</span><span class="p">,</span>  <span class="sh">'</span><span class="s">&gt; 1 hr</span><span class="sh">'</span><span class="p">]</span>
    <span class="n">df_time</span><span class="p">.</span><span class="n">timeTaken</span> <span class="o">=</span> <span class="n">df_time</span><span class="p">.</span><span class="n">timeTaken</span><span class="p">.</span><span class="n">cat</span><span class="p">.</span><span class="nf">rename_categories</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

    <span class="n">df_date</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="nb">str</span><span class="o">+</span><span class="sh">'</span><span class="s">date.csv</span><span class="sh">'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">df_hour</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="nb">str</span><span class="o">+</span><span class="sh">'</span><span class="s">hour.csv</span><span class="sh">'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">df_day</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="nb">str</span><span class="o">+</span><span class="sh">'</span><span class="s">day.csv</span><span class="sh">'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">df_month</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="nb">str</span><span class="o">+</span><span class="sh">'</span><span class="s">month.csv</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">df_mileage_miles</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="nb">str</span><span class="o">+</span><span class="sh">'</span><span class="s">mileage_miles.csv</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">df_mileage_km</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="nb">str</span><span class="o">+</span><span class="sh">'</span><span class="s">mileage_km.csv</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">df_time</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="nb">str</span><span class="o">+</span><span class="sh">'</span><span class="s">time.csv</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="nf">if</span><span class="p">(</span><span class="n">drop</span><span class="p">):</span>
        <span class="n">dfDrop</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">dropArea</span><span class="sh">'</span><span class="p">]]).</span><span class="nf">size</span><span class="p">().</span><span class="nf">to_frame</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">().</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="sh">'</span><span class="s">Percentage</span><span class="sh">'</span><span class="p">})</span>
        <span class="n">dfDrop</span><span class="p">[</span><span class="sh">'</span><span class="s">Percentage</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="nf">round</span><span class="p">((</span><span class="mf">100.</span> <span class="o">*</span> <span class="n">dfDrop</span><span class="p">[</span><span class="sh">'</span><span class="s">Percentage</span><span class="sh">'</span><span class="p">]</span> <span class="o">/</span> <span class="n">dfDrop</span><span class="p">[</span><span class="sh">'</span><span class="s">Percentage</span><span class="sh">'</span><span class="p">].</span><span class="nf">sum</span><span class="p">()),</span><span class="mi">2</span><span class="p">)</span>
        <span class="nf">if</span><span class="p">(</span><span class="n">outChicago</span><span class="p">):</span> <span class="n">n</span><span class="o">=</span><span class="mi">79</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">n</span><span class="o">=</span><span class="mi">78</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
            <span class="nf">if</span><span class="p">(</span><span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dfDrop</span><span class="p">[</span><span class="sh">'</span><span class="s">dropArea</span><span class="sh">'</span><span class="p">].</span><span class="nf">tolist</span><span class="p">()):</span>
                <span class="n">add</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">dropArea</span><span class="sh">'</span><span class="p">:</span><span class="n">i</span><span class="p">,</span> <span class="sh">'</span><span class="s">Percentage</span><span class="sh">'</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
                <span class="n">dfDrop</span> <span class="o">=</span> <span class="n">dfDrop</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">ignore_index</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

        <span class="n">dfDrop</span> <span class="o">=</span> <span class="n">dfDrop</span><span class="p">.</span><span class="nf">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">dropArea</span><span class="sh">'</span><span class="p">],</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">dfDrop</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="nb">str</span><span class="o">+</span><span class="sh">'</span><span class="s">drop.csv</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="nf">if</span><span class="p">(</span><span class="n">pick</span><span class="p">):</span>
        <span class="n">dfPick</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">pickupArea</span><span class="sh">'</span><span class="p">]]).</span><span class="nf">size</span><span class="p">().</span><span class="nf">to_frame</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">().</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="sh">'</span><span class="s">Percentage</span><span class="sh">'</span><span class="p">})</span>
        <span class="n">dfPick</span><span class="p">[</span><span class="sh">'</span><span class="s">Percentage</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="nf">round</span><span class="p">((</span><span class="mf">100.</span> <span class="o">*</span> <span class="n">dfPick</span><span class="p">[</span><span class="sh">'</span><span class="s">Percentage</span><span class="sh">'</span><span class="p">]</span> <span class="o">/</span> <span class="n">dfPick</span><span class="p">[</span><span class="sh">'</span><span class="s">Percentage</span><span class="sh">'</span><span class="p">].</span><span class="nf">sum</span><span class="p">()),</span><span class="mi">2</span><span class="p">)</span>

        <span class="nf">if</span><span class="p">(</span><span class="n">outChicago</span><span class="p">):</span> <span class="n">n</span><span class="o">=</span><span class="mi">79</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">n</span><span class="o">=</span><span class="mi">78</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
            <span class="nf">if</span><span class="p">(</span><span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dfPick</span><span class="p">[</span><span class="sh">'</span><span class="s">pickupArea</span><span class="sh">'</span><span class="p">].</span><span class="nf">tolist</span><span class="p">()):</span>
                <span class="n">add</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">pickupArea</span><span class="sh">'</span><span class="p">:</span><span class="n">i</span><span class="p">,</span> <span class="sh">'</span><span class="s">Percentage</span><span class="sh">'</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
                <span class="n">dfPick</span> <span class="o">=</span> <span class="n">dfPick</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">ignore_index</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

        <span class="n">dfPick</span> <span class="o">=</span> <span class="n">dfPick</span><span class="p">.</span><span class="nf">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">pickupArea</span><span class="sh">'</span><span class="p">],</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">dfPick</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="nb">str</span><span class="o">+</span><span class="sh">'</span><span class="s">pick.csv</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">filename</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Taxi_Trips_-_2019.csv</span><span class="sh">"</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">taxiDict.csv</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">csv_file</span><span class="p">:</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="nf">reader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
    <span class="n">mydict</span> <span class="o">=</span> <span class="nf">dict</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

<span class="n">dictCompany</span> <span class="o">=</span> <span class="nf">dict</span><span class="p">((</span><span class="n">v</span><span class="p">,</span> <span class="nf">int</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mydict</span><span class="p">.</span><span class="nf">items</span><span class="p">())</span>

<span class="n">dfTaxi</span> <span class="o">=</span> <span class="nf">preprocess</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">dictCompany</span><span class="p">)</span>

<span class="c1"># All Areas All Taxi
</span><span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allAreaAllTaxi</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allAreaAllTaxi/outsideCity/</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allAreaAllTaxi</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allAreaAllTaxi/onlyCity/</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">preCalc</span><span class="p">(</span><span class="n">dfTaxi</span><span class="p">,</span> <span class="sh">"</span><span class="s">allAreaAllTaxi/outsideCity/</span><span class="sh">"</span><span class="p">)</span>
<span class="n">dfTaxiSub</span> <span class="o">=</span> <span class="n">dfTaxi</span><span class="p">[</span><span class="o">~</span><span class="p">((</span><span class="n">dfTaxi</span><span class="p">[</span><span class="sh">'</span><span class="s">pickupArea</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">78</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">dfTaxi</span><span class="p">[</span><span class="sh">'</span><span class="s">dropArea</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">78</span><span class="p">))]</span>
<span class="nf">preCalc</span><span class="p">(</span><span class="n">dfTaxiSub</span><span class="p">,</span> <span class="sh">"</span><span class="s">allAreaAllTaxi/onlyCity/</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># All Taxi Pickup Areas
</span><span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allTaxi</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allTaxi/From</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">78</span><span class="p">):</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allTaxi/From/Area-{}/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

    <span class="n">sub</span> <span class="o">=</span> <span class="n">dfTaxi</span><span class="p">[</span><span class="n">dfTaxi</span><span class="p">[</span><span class="sh">'</span><span class="s">pickupArea</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">]</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allTaxi/From/Area-{}/outsideCity/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
    <span class="nf">preCalc</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

    <span class="n">sub</span> <span class="o">=</span> <span class="n">dfTaxiSub</span><span class="p">[</span><span class="n">dfTaxiSub</span><span class="p">[</span><span class="sh">'</span><span class="s">pickupArea</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">]</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allTaxi/From/Area-{}/onlyCity/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
    <span class="nf">preCalc</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

<span class="c1"># All Taxi Dropoff Areas
# Percentage Coming From
</span><span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allArea</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allTaxi</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allTaxi/To</span><span class="sh">"</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">78</span><span class="p">):</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allTaxi/To/Area-{}/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

    <span class="n">sub</span> <span class="o">=</span> <span class="n">dfTaxi</span><span class="p">[</span><span class="n">dfTaxi</span><span class="p">[</span><span class="sh">'</span><span class="s">dropArea</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">]</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allTaxi/To/Area-{}/outsideCity/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
    <span class="nf">preCalc</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

    <span class="n">sub</span> <span class="o">=</span> <span class="n">dfTaxiSub</span><span class="p">[</span><span class="n">dfTaxiSub</span><span class="p">[</span><span class="sh">'</span><span class="s">dropArea</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">]</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allTaxi/To/Area-{}/onlyCity/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
    <span class="nf">preCalc</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

<span class="c1"># All Areas
</span><span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allArea</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">55</span><span class="p">):</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allArea/Taxi-{}/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

    <span class="n">sub</span> <span class="o">=</span> <span class="n">dfTaxi</span><span class="p">[</span><span class="n">dfTaxi</span><span class="p">[</span><span class="sh">'</span><span class="s">company</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">]</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allArea/Taxi-{}/outsideCity/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
    <span class="nf">preCalc</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="nb">dir</span><span class="p">)</span>

    <span class="n">sub</span> <span class="o">=</span> <span class="n">dfTaxiSub</span><span class="p">[</span><span class="n">dfTaxiSub</span><span class="p">[</span><span class="sh">'</span><span class="s">company</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">]</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allArea/Taxi-{}//onlyCity/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
    <span class="nf">preCalc</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="nb">dir</span><span class="p">)</span>

<span class="c1"># Taxi - Area (To/From) All Combinations
</span><span class="nf">mkdir</span><span class="p">(</span><span class="sh">"</span><span class="s">allCombination</span><span class="sh">"</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">55</span><span class="p">):</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allCombination/Taxi-{}/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="o">+</span><span class="sh">"</span><span class="s">From/</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="o">+</span><span class="sh">"</span><span class="s">To/</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">78</span><span class="p">):</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allCombination/Taxi-{}/From/Area-{}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
        <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

        <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allCombination/Taxi-{}/From/Area-{}/onlyCity/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
        <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

        <span class="n">sub</span> <span class="o">=</span> <span class="n">dfTaxiSub</span><span class="p">[(</span><span class="n">dfTaxiSub</span><span class="p">[</span><span class="sh">'</span><span class="s">company</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfTaxiSub</span><span class="p">[</span><span class="sh">'</span><span class="s">pickupArea</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">j</span><span class="p">)]</span>
        <span class="nf">preCalc</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

        <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allCombination/Taxi-{}/From/Area-{}/outsideCity/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
        <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="n">dfTaxi</span><span class="p">[(</span><span class="n">dfTaxi</span><span class="p">[</span><span class="sh">'</span><span class="s">company</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfTaxi</span><span class="p">[</span><span class="sh">'</span><span class="s">pickupArea</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">j</span><span class="p">)]</span>
        <span class="nf">preCalc</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

        <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allCombination/Taxi-{}/To/Area-{}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
        <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

        <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allCombination/Taxi-{}/To/Area-{}/onlyCity/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
        <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

        <span class="n">sub</span> <span class="o">=</span> <span class="n">dfTaxiSub</span><span class="p">[(</span><span class="n">dfTaxiSub</span><span class="p">[</span><span class="sh">'</span><span class="s">company</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfTaxiSub</span><span class="p">[</span><span class="sh">'</span><span class="s">dropArea</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">j</span><span class="p">)]</span>
        <span class="nf">preCalc</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

        <span class="nb">dir</span> <span class="o">=</span> <span class="sh">"</span><span class="s">allCombination/Taxi-{}/To/Area-{}/outsideCity/</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
        <span class="nf">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

        <span class="n">sub</span> <span class="o">=</span> <span class="n">dfTaxi</span><span class="p">[(</span><span class="n">dfTaxi</span><span class="p">[</span><span class="sh">'</span><span class="s">company</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dfTaxi</span><span class="p">[</span><span class="sh">'</span><span class="s">dropArea</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="n">j</span><span class="p">)]</span>
        <span class="nf">preCalc</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div></div> <p><br></p> <h5><u>Interesting Findings</u></h5> <p align="justify"> <b>Findings 1:</b> When looking at all community area in Chicago, I find it interesting that there are some gaps during the end of January, the start of April, the end of May, the start of July, the start of September, and the end of November. There are also minor gaps in the graph which might be because of low ridership during weekends. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/findings/Findings%201.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="data" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Findings 1 </div> <p align="justify"> <b>Findings 2:</b> Looking at this insight backs up our theory about the second part of insight 1. There are low ridership data in Chicago during weekends and highest ridership on Thursdays and Fridays as can be seen on the bar graph and data table. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/findings/Findings%202.png" class="img-fluid rounded z-depth-1 w-100" width="auto" height="auto" title="data" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Findings 2 </div> <p align="justify"> <b>Findings 3:</b> Here we are looking data from only the Loop. When we look at 8 AM, 9 AM, 4 PM and 5 PM, there is a relative spike in ridership compared to the other times around those specific time of the day. This can be explained by the fact that those are rush-hour times. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/findings/Findings%203.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="data" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Findings 3 </div> <p align="justify"> <b>Findings 4:</b> Here we are looking at data from only the Loop. The majority of the rides are between 0.8 and 2 Kilometers. This might be because the customers are mostly traveling within the loop. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/findings/Findings%204.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="data" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Findings 4 </div> <p align="justify"> <b>Findings 5:</b> Here we are looking at data from only the Loop. The majority of the rides are between 5 and 10 minutes. This furthermore supports our claims from insight 4 that most of the riders in the loop are traveling small distances and possibly within the loop. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/findings/Findings%205.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="data" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Findings 5 </div> <p align="justify"> <b>Findings 6:</b> Here we are looking at data from only the Loop. The previous two insights can be furthermore supported as about 1/4 of the riders are traveling within the loop. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/big_yellow_taxi/findings/Findings%206.png" class="img-fluid rounded z-depth-1 w-100" width="auto" height="auto" title="data" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Findings 6 </div> <p><br></p> <h5><u>Setup and Installations</u></h5> <p><u><b>Install R:</b></u> <br></p> <p>Download R from <a href="https://www.r-project.org/" rel="external nofollow noopener" target="_blank">https://www.r-project.org/</a> (4.1.2). Click âdownload Râ.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/subway/installation/1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="install" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> R installation </div> <p>You can select the default link <a href="https://cloud.r-project.org" rel="external nofollow noopener" target="_blank">https://cloud.r-project.org/</a>.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/subway/installation/2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="install" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Select default link </div> <p>Download and install a version that match your OS.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/projects/subway/installation/3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="install" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Match OS installation </div> <p><u><b>Install RStudio:</b></u> <br></p> <p>Download and install RStudio from <a href="https://rstudio.com/products/rstudio/" rel="external nofollow noopener" target="_blank">https://rstudio.com/products/rstudio/</a>.</p> <div class="row"> <div class="col-sm mt-3 mt-5md-0"> <figure> <picture> <img src="/assets/img/projects/subway/installation/4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="install" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> RStudio installation </div> <p>Download the free version.</p> <div class="row"> <div class="col-sm mt-3 mt-5md-0"> <figure> <picture> <img src="/assets/img/projects/subway/installation/5.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="install" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> RStudio free version </div> <p><u><b>Setup the project:</b></u> <br></p> <p>Create a folder in your local machine where you want the project to locate at. Open the terminal and set the direction to the created folder. Run the following command:</p> <p><code class="language-plaintext highlighter-rouge">git clone https://github.com/komar41/Big-Yellow-Taxi.git</code>.</p> <div class="row"> <div class="col-sm mt-3 mt-5md-0"> <figure> <picture> <img src="/assets/img/projects/dont_sleep_in_the_subway/installation/6.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="install" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> git clone </div> <p>Open RStudio. Go to âFileâ and select âOpen Projectâ.</p> <div class="row"> <div class="col-sm mt-3 mt-5md-0"> <figure> <picture> <img src="/assets/img/projects/dont_sleep_in_the_subway/installation/7.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="install" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Open project in RStudio </div> <p>Choose the project folder (âBig-Yellow-Taxiâ) that you cloned from GitHub.</p> <div class="row"> <div class="col-sm mt-3 mt-5md-0"> <figure> <picture> <img src="/assets/img/projects/dont_sleep_in_the_subway/installation/8.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="install" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Select project folder </div> <p>Open the file âapp.Râ and press âRun Appâ button on RStudio.</p> <div class="row"> <div class="col-sm mt-3 mt-5md-0"> <figure> <picture> <img src="/assets/img/projects/dont_sleep_in_the_subway/installation/9.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="install" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Run app </div> <p>Rstudio will tell you if you are missing some of the packages. When the pop-up shows up, click âYesâ to install all those packages.</p> <div class="row"> <div class="col-sm mt-3 mt-5md-0"> <figure> <picture> <img src="/assets/img/projects/dont_sleep_in_the_subway/installation/10.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="install" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Install missing packages </div> <p>After Installation of those packages, RStudio will start a Shiny app on your local machine.</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> Â© Copyright 2024 Kazi Shahrukh Omar. Powered by Jekyll with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio theme</a>. Last updated: July 16, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js"></script> <script defer src="/assets/js/common.js"></script> <script defer src="/assets/js/copy_code.js" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>